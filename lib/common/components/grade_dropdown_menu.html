<link rel="import" href="../../../../packages/polymer/polymer.html">

<link rel="import" href="../../../../packages/core_elements/core_menu.html">

<link rel="import" href="../../../../packages/paper_elements/paper_dropdown_menu.html">
<link rel="import" href="../../../../packages/paper_elements/paper_dropdown.html">

<link rel="import" href="field_error.html">

<polymer-element name="grade-dropdown-menu" vertical layout>
  <template>
    <style>
    
      :host {
        display: block;
      }
			
			/* undo predefined layout assumptions */
			
      :host paper-dropdown-menu { 
        padding: 0px; 
        margin: 0;
        background:transparent;
        border-color:lightgrey;
      }
      
      /*:host paper-dropdown-menu /deep/ paper-dropdown {  width:95% !important; max-height:200px} */  /* FIX: expands dropw down to fill the screen and not more*/
			
			:host paper-dropdown-menu::shadow #label { max-height:21px;}
			:host paper-dropdown-menu::shadow #label > div { padding: 0px }
			
			[item-label]::shadow #label { color:rgba(0, 0, 0, 0.870588);}

			:host paper-dropdown-menu::shadow #arrow { 
				margin: 0px; 
				min-width: 32px; 
				width: 32px; 
				height: 32px; 
				min-height: 32px 
			}
		  
		  :host paper-dropdown-menu[disabled]::shadow  #arrow {display: none;}
		  :host paper-dropdown-menu[disabled] {border: none;}
		  :host paper-dropdown-menu[disabled] {cursor: auto; pointer-events: none;}
		  
		  paper-dropdown {  
		   /* width:95%;*/
		    box-sizing: border-box;
		  } 
		  
		  ::content [dropitem] { 
			  height:25px !important;
			  font-size:smaller;
			  background: none;
		  }
      
      :host([focused]) .error-text, :host([focused]) .error-icon {
        color: #d34336;
      }
	      
	    paper-dropdown-menu {
	      box-sizing: border-box;
	    }
	
	    core-menu {
	      box-sizing: border-box;
	      margin-top: 8px;
	      margin-bottom: 8px;
	    }
	    
	    [empty-msg] {
	     color: #757575;
	    }

		</style>
		
    <paper-dropdown-menu id="dropdownmenu" label={{label}} disabled?={{disabled}} hidden?={{showEmptyMenuMsg}} item-label?="{{selected!=null}}">
      <paper-dropdown id="dropdownpanel" class="dropdown" transition="">
        <core-menu id ="menu" class="menu" selected={{selected}} selectedAttribute="{{selectedAttribute}}" valueattr="dropitem">
          <content select="*"></content>
        </core-menu>
      </paper-dropdown>
		</paper-dropdown-menu>
		
		<div empty-msg hidden?={{!showEmptyMenuMsg}}>{{emptyMenuMsg}}</div>
		
		<field-error show="{{invalid && !showEmptyMenuMsg}}">{{errorMsg}}</field-error>
    
	</template>
	      
  <script type="application/dart" src="grade_dropdown_menu.dart"></script> 
	
</polymer-element>