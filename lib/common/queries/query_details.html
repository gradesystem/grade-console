<link rel="import" href="../../../../packages/polymer/polymer.html">
<link rel="import" href="../../../../packages/core_elements/core_icon.html">

<link rel="import" href="../components/grade_input.html">
<link rel="import" href="../components/grade_item.html">
<link rel="import" href="../components/grade_fascia.html">
<link rel="import" href="../components/loading_panel.html">

<link rel="import" href="queries.html">

<polymer-element name="query-details" layout vertical> 

  <template>
  
    
      <style>
        
        grade-input::shadow [multiline] {
           max-height: 150px;
        }
        
      </style>

  <loading-panel loading="{{loading}}" message="saving the query">
   
   <div style="overflow-y: auto;">
  
      <template repeat="{{key in fields}}">
      
          <grade-item icon=chevron-right>
          
            <grade-fascia>
                     
                     <grade-input fascia-title 
                                  disabled="{{ !editable }}" 
                                  multiline?="{{ isAreaField(key) }}"
                                  label="{{ key | suffix }} ?" 
                                  required?="{{ isRequiredField(key) }}"
                                  validators="{{ validatorsFor(key)}}"
                                  invalid="{{ item.fieldsInvalidity[key] }}"
                                  inputValue="{{ item.model.bean[key]  }}">
                     </grade-input>
                     
                <div fascia-subtitle><span>{{ key | start}}</span><span fg bolder>{{ key | suffix}}</span></div>
            </grade-fascia>
              
          </grade-item>
	       
      </template>  

         <grade-item icon=chevron-right>
          
            <grade-fascia>
                  
                  <div fascia-title>{{ parameters }}</div>
                  <div fascia-subtitle><span>{{ parameters_key | start }}</span><span fg bolder>{{ parameters_key | suffix}}</span></div>
                  
              </grade-fascia>
              
          </grade-item>
      
      
          <grade-item icon=chevron-right>
          
	          <grade-fascia>

	                <div fascia-title>{{ item.model.endpoint }}</div>
	                <div fascia-subtitle><span>{{ endpoint_key | start }}</span><span fg bolder>{{ endpoint_key | suffix}}</span></div>
	                
	            </grade-fascia>
              
          </grade-item>
          
      </div>  
      </loading-panel>
		
  </template> 
</polymer-element>
