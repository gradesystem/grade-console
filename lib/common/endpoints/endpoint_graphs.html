<link rel="import" href="../../../../packages/polymer/polymer.html">
<link rel="import" href="../../../../packages/core_elements/core_icon.html">
<link rel="import" href="../../../../packages/core_elements/core_selector.html">

<link rel="import" href="../components/grade_input.html">
<link rel="import" href="../components/grade_uri.html">
<link rel="import" href="../components/grade_fascia.html">
<link rel="import" href="../components/loading_panel.html">
<link rel="import" href="../components/grade_button.html">

<link rel="import" href="endpoints.html">

<polymer-element name="endpoint-graphs" layout vertical> 

  <template>
    
		<style>
		
		  :host [sidebutton] {  padding-left:5px }
		  
      :host [starts-hidden] { visibility:hidden }
       
      :host [fg] [onhover-selected] { visibility:visible }
      
      :host [list] { min-height:200px; padding:5px; overflow-y:auto }
      
      
 	</style>

    <template if="{{item!=null}}">
	   
	    <loading-panel loading="{{loading}}" message="saving endpoint">
	   
	      <div style="overflow-y: auto;">
	        
	        <template if="{{!item.newModel}}">
	        
	           <!--  graph list and button  -->
             <div flex horizontal layout>
             
              <!-- graph list -->
	            <loading-panel list wired rounded relative flex loading="{{item.loadingGraphs}}" message="loading graphs">

	                  <core-selector selectedAttribute="fg">
		                 
		                   <template repeat="{{graph in item.model.graphs}}">
				               
				                 <!-- entry and remove button -->
					                <div horizontal layout center>
					                 
						                 <grade-uri smaller flex value={{graph}}></grade-uri>
	
	  				                 <grade-button
						                          action 
						                          starts-hidden
						                          onhover-selected
						                          smallicon 
						                          tooltip="left" 
						                          label="remove graph" 
						                          icon="delete" 
						                          on-click={{removeGraph}} 
						                          graph={{graph}}>
						                 </grade-button>
						                
						              </div>
				                
				              </template>
			              
			              </core-selector>
		           
		            </loading-panel>
           
              <!-- button -->
              <grade-button sidebutton icon=refresh
                            tooltip=left
                            label="reload graphs" 
                            on-click={{refreshGraphs}} >
              </grade-button>
           
            </div>
             
           <div horizontal layout style="margin-top:30px">
                
		         <grade-fascia truncate flex>
            
	               <grade-input fascia-title
	                               label="uri" 
	                               invalid="{{ newUrlInvalid }}"
	                               inputValue="{{ newUrl  }}"
	                               type="URL">
	               </grade-input>
	               
	               <div fascia-subtitle uppercase><span>new graph</span></div>
	               
	          </grade-fascia>
                
            <grade-button
                  sidebutton
                  action 
                  disabled?="{{newUrlInvalid || newUrl.isEmpty}}"
                  icon="add" 
                  on-click={{addGraph}} 
                  tooltip=left
                  label="create new graph">
            </grade-button>
            
          </div>
     
	        
	        </template>
	          
	      </div>  
	    </loading-panel>
    </template>
		
  </template> 
</polymer-element>
